import{r,j as e,L as S,B as i,ar as m,as as u,A as y,f as g,g as M,P as R,i as O,k as E,l as K}from"./index-DP8FjTfo.js";import{g as L,h as P}from"./taskApiSlice-CQVkAHk5.js";import{T as I,C as Y}from"./Title-BScR8jUY.js";import"bcryptjs";const _={high:e.jsx(O,{}),medium:e.jsx(E,{}),low:e.jsx(K,{})},U=()=>{var j;const[b,t]=r.useState(!1);r.useState(!1);const[N,c]=r.useState(null),[p,l]=r.useState("delete"),[d,h]=r.useState(""),{data:x,isLoading:f}=L({strQuery:"",isTrashed:"true",search:""}),[o]=P(),w=async s=>{var n;try{let a;switch(p){case"delete":a=await o({id:d,actionType:"delete"}).unwrap();break;case"deleteAll":a=await o({id:d,actionType:"deleteAll"}).unwrap();break;case"restore":a=await o({id:d,actionType:"restore"}).unwrap();break;case"restoreAll":a=await o({id:d,actionType:"restoreAll"}).unwrap();break;default:break}y.success(a==null?void 0:a.message),setTimeout(()=>{t(!1),s()},500)}catch(a){console.log(a),y.error(((n=a==null?void 0:a.data)==null?void 0:n.message)||a.error)}},k=()=>{l("deleteAll"),c("Do you want to permenantly delete all items?"),t(!0)},T=()=>{l("restoreAll"),c("Do you want to restore all items in the trash?"),t(!0)},A=s=>{l("delete"),h(s),t(!0)},v=s=>{h(s),l("restore"),c("Do you want to restore the selected item?"),t(!0)};if(f)return e.jsx("div",{className:"py-10",children:e.jsx(S,{})});const D=()=>e.jsx("thead",{className:"border-b border-gray-300",children:e.jsxs("tr",{className:"text-black  text-left",children:[e.jsx("th",{className:"py-2",children:"Task Title"}),e.jsx("th",{className:"py-2",children:"Priority"}),e.jsx("th",{className:"py-2",children:"Stage"}),e.jsx("th",{className:"py-2 line-clamp-1",children:"Modified On"})]})}),C=({item:s})=>e.jsxs("tr",{className:"border-b border-gray-200 text-gray-600 hover:bg-gray-400/10",children:[e.jsx("td",{className:"py-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:g("w-4 h-4 rounded-full",M[s.stage])}),e.jsx("p",{className:"w-full line-clamp-2 text-base text-black",children:s==null?void 0:s.title})]})}),e.jsx("td",{className:"py-2 capitalize",children:e.jsxs("div",{className:"flex gap-1 items-center",children:[e.jsx("span",{className:g("text-lg",R[s==null?void 0:s.priority]),children:_[s==null?void 0:s.priority]}),e.jsx("span",{className:"",children:s==null?void 0:s.priority})]})}),e.jsx("td",{className:"py-2 capitalize text-center md:text-start",children:s==null?void 0:s.stage}),e.jsx("td",{className:"py-2 text-sm",children:new Date(s==null?void 0:s.date).toDateString()}),e.jsxs("td",{className:"py-2 flex gap-1 justify-end",children:[e.jsx(i,{icon:e.jsx(m,{className:"text-xl text-gray-500"}),onClick:()=>v(s._id)}),e.jsx(i,{icon:e.jsx(u,{className:"text-xl text-red-600"}),onClick:()=>A(s._id)})]})]});return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"w-full md:px-1 px-0 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx(I,{title:"Trashed Tasks"}),e.jsxs("div",{className:"flex gap-2 md:gap-4 items-center",children:[e.jsx(i,{label:"Restore All",icon:e.jsx(m,{className:"text-lg hidden md:flex"}),className:"flex flex-row-reverse gap-1 items-center  text-black text-sm md:text-base rounded-md 2xl:py-2.5",onClick:()=>T()}),e.jsx(i,{label:"Delete All",icon:e.jsx(u,{className:"text-lg hidden md:flex"}),className:"flex flex-row-reverse gap-1 items-center  text-red-600 text-sm md:text-base rounded-md 2xl:py-2.5",onClick:()=>k()})]})]}),e.jsx("div",{className:"bg-white px-2 md:px-6 py-4 shadow-md rounded",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full mb-5",children:[e.jsx(D,{}),e.jsx("tbody",{children:(j=x==null?void 0:x.tasks)==null?void 0:j.map((s,n)=>e.jsx(C,{item:s},n))})]})})})]}),e.jsx(Y,{open:b,setOpen:t,msg:N,setMsg:c,type:p,setType:l,onClick:()=>w()})]})};export{U as default};
